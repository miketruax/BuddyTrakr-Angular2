<h2 class="col col-xs-12 bottom-5">Welcome, <span class="orange">{{user.username}}!</span><br> Let's get tracking! </h2>


<!--SEARCH BAR-->

<div class="col col-xs-12">
  <input class="form-control tan-input" placeholder="Search by name, species, or scientific name" type="text"
         [(ngModel)]="filter.search">
  <div class="col checkbox col-xs-9">
    <label>
      <input type="checkbox" [(ngModel)]="filter.neverOut"> Only buddies who have never been out
    </label>
  </div>
  <button class="col btn btn-xs col-xs-3" (click)="clearFilter()">Clear</button>
</div>


<!--CHECKED OUT BUDDY HEADER AND BUDDIES-->

<h3 *ngIf="(buddies | checkedIn | buddySearch:filter.search).length > 0" class="col-xs-12"><i>Checked out buddies:</i>
</h3>

<div *ngFor="let buddy of (buddies | checkedOut | buddySearch:filter.search)"
     class="col col-xs-12 buddy">
  <div class="col col-xs-12 bottom-5 col-md-6">
    <div class="col col-xs-4">
      <img class="paw-icon" src="/assets/img/icons/checked_out.png"/>
    </div>
    <h3 class="col col-xs-8">{{buddy.name}}</h3>
  </div>
  <div class="col col-xs-12 col-md-6 bottom-5">
    <div class="col col-xs-12"><b>Species:</b> {{buddy.species}} <span *ngIf="buddy.binomial && buddy.binomial !== ' '"> ({{buddy.binomial}})</span>
    </div>
    <div class="col col-xs-12"><b>Birthday:</b> {{buddy.dateAdded ? (buddy.dateAdded | date: 'longDate') : 'Unknown'}}</div>
    <div class="col col-xs-12" *ngIf="buddy.description"><b>Description:</b> {{buddy.description}}</div>
    <div class="col col-xs-12">Buddy has been out since: {{buddy.lastOutDate | date:'shortDate'}}</div>
  </div>
  <button class="col col-xs-6 offset-xs-6 btn" (click)="checker.emit(buddy); $event.stopPropagation();">
    <i>Check In</i>
  </button>
</div>

<!--GENERIC BUDDY BUTTONS-->

<div class="col-xs-12">
  <button (click)="randomBuddy.emit(buddies); $event.stopPropagation();"
          class="col-xs-8 offset-xs-2 col-sm-4 offset-sm-2 btn">Check out a Random Buddy
  </button>
  <button (click)="addBuddy.emit(buddies); $event.stopPropagation();"
          class="col-xs-8 offset-xs-2 col-sm-4 offset-sm-2 btn">Add a New Buddy
  </button>
</div>


<!--CHECKED IN BUDDIES HEADER AND BUDDIES-->


<h3 *ngIf="(buddies | checkedIn | buddySearch:filter.search | neverOut:filter.neverOut).length > 0" class="col-xs-12">
  <i>Checked-in buddies:</i></h3>
<div class="col-xs-12 flex container">
<div *ngFor="let buddy of (buddies | checkedIn | buddySearch:filter.search | neverOut:filter.neverOut)"
     class="col-xs-12 col-sm-6 buddy">
    <img class="paw-icon" src="assets/img/icons/checked_in.png"/>
    <h3 class="col-xs-8">{{buddy.name}}</h3>
    <div class="col-xs-12">
      <button class="col-xs-5 text-center btn col-md-4 offset-md-2"
              (click)="checker.emit(buddy); $event.stopPropagation();">
        <i>Check Out</i>
      </button>
      <button class="offset-xs-1 text-center col-md-4 col-xs-4 btn"
              (click)="selected.emit(buddy); $event.stopPropagation();">
        <i>Edit</i>
      </button>
    </div>
  <div class="col-xs-12 bottom-5 buddy-content">
    <div><b>Species:</b> {{buddy.species}} <span *ngIf="buddy.binomial && buddy.binomial !== ' '"> ({{buddy.binomial}})</span>
    </div>
    <div><b>Birthday:</b> {{buddy.dateAdded ? (buddy.dateAdded | date: 'longDate') : 'Unknown'}}</div>
    <div *ngIf="buddy.description"><b>Description:</b> {{buddy.description}}</div>
    <div *ngIf="buddy.lastOutDate"><b>Last Out:</b>
      <span>{{buddy.lastOutDate | date}} for {{buddy.lastOutDays}} days.</span>
    </div>
    <div *ngIf="buddy.timesOut"> Out {{buddy.timesOut}} times for a total of {{buddy.totalDaysOut}}
      days.
    </div>
    <div *ngIf="!buddy.lastOutDate"><b>Your buddy hasn't been out yet. You should rectify that!</b></div>
  </div>
</div>
</div>
